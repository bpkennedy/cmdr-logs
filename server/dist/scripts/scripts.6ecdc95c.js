"use strict";angular.module("clientApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","toastr"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("root",{url:"","abstract":!0,resolve:{},views:{"titlebar@":{templateUrl:"views/titlebar.html",controller:"TitlebarCtrl",controllerAs:"vm"}}}),a.state("root.dashboard",{url:"/",data:{pageName:"MainCtrl",browserTitle:"Main"},views:{"container@":{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"vm"}}}),a.state("root.about",{url:"/about",data:{pageName:"AboutCtrl",browserTitle:"About"},views:{"container@":{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"vm"}}}),a.state("root.login",{url:"/login",data:{pageName:"LoginCtrl",browserTitle:"Login"},views:{"container@":{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"vm"}}})}]).run(["firebaseSvc",function(a){a.initializeFirebase()}]),angular.module("clientApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").factory("firebaseSvc",["$window",function(a){function b(){var a={apiKey:"AIzaSyC4shLU7c2ldYdctyitLe4qmPv09H3pXk8",authDomain:"cmdr-logs.firebaseapp.com",databaseURL:"https://cmdr-logs.firebaseio.com",storageBucket:"cmdr-logs.appspot.com",messagingSenderId:"375363069051"};firebase.initializeApp(a)}function c(){return a.firebase}return{initializeFirebase:b,getFirebase:c}}]),angular.module("clientApp").controller("LoginCtrl",["auth","toastr","$timeout",function(a,b,c){function d(){a.signInUser(i.userEmail,i.password).then(function(a){b.success("You signed in.","Success!")})["catch"](function(a){b.error(a.message,a.code)})}function e(){a.createUser(i.newUserEmail,i.newPassword).then(function(a){g(i.cmdrName),b.success("New account created.","Success!")})["catch"](function(a){b.error(a.message,a.code)})}function f(){g(i.newCmdrName)}function g(a){var c=firebase.auth().currentUser;c.updateProfile({displayName:a}).then(function(){b.success("Updated profile.","Success!")},function(a){b.error(a.message,a.code)})}function h(){a.signOutUser().then(function(){b.success("You signed out.","Success!")})["catch"](function(a){b.error(a.message,a.code)})}var i=this;i.createUser=e,i.updateUser=f,i.login=d,i.signOutUser=h,i.password="",i.userEmail="",i.newUserEmail="",i.newPassword="",i.cmdrName="",i.newCmdrName=""}]),angular.module("clientApp").factory("auth",["firebaseSvc",function(a){function b(a){a?g.user.data=a:g.user.data=null}function c(){return g.user}function d(a,b){return g.firebase.auth().createUserWithEmailAndPassword(a,b)}function e(a,b){return g.firebase.auth().signInWithEmailAndPassword(a,b)}function f(){return g.firebase.auth().signOut()}var g=this;return g.firebase=a.getFirebase(),g.user={data:null},firebase.auth().onAuthStateChanged(function(a){b(a)}),{getCurrentUser:c,createUser:d,signInUser:e,signOutUser:f}}]),angular.module("clientApp").controller("TitlebarCtrl",["auth","$timeout",function(a,b){function c(){d()}function d(){b(function(){e.user=a.getCurrentUser()},100)}var e=this;e.user=null,c()}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/about.html",'<div class="container"> <p>This is the about view.</p> </div>'),a.put("views/login.html",'<div class="container"> <p>This is the login view.</p> <div class="" ng-click="vm.checkIfLoggedIn()"> Click to check if logged in. </div> <div class="" ng-click="vm.signOutUser()"> Click to sign out user. </div> <div class="well"> Click to try log in. <div class="form"> <div class="form-group"> <label for="userEmail">User Email</label> <input class="form-control" id="userEmail" type="text" name="" value="" ng-model="vm.userEmail"> </div> <div class="form-group"> <label for="password">Password</label> <input class="form-control" type="text" id="password" name="" value="" ng-model="vm.password"> </div> </div> <div class="btn btn-primary" ng-click="vm.login()"> LOGIN </div> </div> <div class="well"> Click to try creating a user. <div class="form"> <div class="form-group"> <label for="newUserEmail">New User\'s email</label> <input class="form-control" id="newUserEmail" type="text" name="" value="" ng-model="vm.newUserEmail"> </div> <div class="form-group"> <label for="newPassword">Password</label> <input class="form-control" type="text" id="newPassword" name="" value="" ng-model="vm.newPassword"> </div> <div class="form-group"> <label for="cmdrName">Commander Name</label> <input class="form-control" id="cmdrName" type="text" name="" value="" ng-model="vm.cmdrName"> </div> </div> <div class="btn btn-danger" ng-click="vm.createUser()"> LOGIN </div> </div> <div class="well"> Update your profile <div class="form"> <div class="form-group"> <label for="newCmdrName">New Commander Name</label> <input class="form-control" id="newCmdrName" type="text" name="" value="" ng-model="vm.newCmdrName"> </div> </div> <div class="btn btn-danger" ng-click="vm.updateUser()"> SAVE </div> </div> </div>'),a.put("views/main.html",'<div class="main-wrapper"> <div class="sidebar"> <div class="sidebar-title"> Journal Entries </div> <div class="separator"></div> <ul class="journal-list"> <li>Into the Black</li> <li>A shaky proposition</li> <li>Aliens, dude</li> </ul> <div class="new-entry"> <i class="fa fa-plus"></i> New Entry </div> </div> <div class="vertical-separator"></div> <div class="reading-pane"> <div class="entry-title"> <div class="star-date"> 0109 Jan 7, 3303 </div> <div class="title-text"> Into the Black </div> </div> <div class="separator reading-separator"></div> <div class="reading-body"> The text and whatnot will all go here. </div> </div> </div>'),a.put("views/titlebar.html",'<!-- Add your site or application content here --> <div class="titlebar-wrapper"> <div class="nav-top"></div> <div class="navbar navbar-default" role="navigation"> <div class=""> <div class="navbar-header"> </div> <div class="" id=""> <ul class="nav navbar-nav"> <li ui-sref-active="active"><a ui-sref="root.dashboard">CMDR Logs</a></li> <!-- <li ui-sref-active="active"><a ui-sref="root.about">About</a></li> --> <li ng-if="!vm.user.data" ui-sref-active="active"><a ui-sref="root.login">Login</a></li> <li ng-if="vm.user.data" ui-sref-active="active"> <a ui-sref="root.login">{{vm.user.data.displayName || \'Commander\'}}</a> </li> </ul> </div> </div> </div> <div class="nav-bottom"></div> </div>')}]);